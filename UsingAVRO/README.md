The goal of this assignment is to familiarize yourself with:

defining objects using AVRO
generating the Java bindings
building/using/referencing AVRO objects in your map-reduce code
understanding output of AVRO defined objects
In this assignment you will:

define an object (using AVRO) that contains the data produced by the WordStatistics app:
document count
total count
min
max
sum of squares
mean
variance
Call this AVRO defined object WordStatisticsData
Modify your WordStatistics app from Assignment 2 to use WordStatisticsData, and collect stats for words and paragraph length, including min and max (word count in a paragraph, or paragraph length)
Use the example code from WordCountA.java as your guide for using an AVRO defined object. This file is available on Canvas (Files / Assignment 4).

For maven to see your AVRO schema file (file suffix is:  .avsc), you need to place it under the directory: src/main/avro

 A new pom.xml file is available that defines the AVRO dependencies and AVRO version you should use. Use this pom file, as AWS Hadoop and AVRO are sensitive to version differences, and these cause you lots of headaches if you get them wrong. The first time you build with maven, the required AVRO jars and other jars AVRO depends on will be retrieved. This may take a few minutes, as there are quite a few new jar files. 

Required elements:

Define an AVRO object named WordStatisticsData
Mapper output types: Text, AvroValue<WordStatisticsData>
Reducer output types: Text, AvroValue<WordStatisticsData>
Output file format: TextOutputFormat
Use dataSet2Xa.txt and dataSet2Xb.txt for input
As we did in Assignment 2:
Convert messages to lower case
Compute the message length statistics.
You will be able to compare your results (mean and variance) with the results for Assignment 2 extra credit (available on Canvas).
Use example code in WordCountA as your guide (available on Canvas: Files / Assignment 4).

 

Artifacts to submit:

Assignment4Build.zip or .tar - Java code and AVRO schema (in the directory structure recognized by the pom.xml file), and pom.xml.
Assignment4Code.zip - Java code and AVRO schema (all files in one directory).
Assignment4Output.txt - output generated by your solution.
 

Files available on Canvas (Files / Assignment 4):

pom.xml
WordCountA.java
WordCountMapper.java
wordCountData.avsc
 

Notes on Using AVRO.

Useful links:

http://avro.apache.org/docs/1.7.4/spec.htmlLinks to an external site.
http://avro.apache.org/docs/1.7.4/gettingstartedjava.htmlLinks to an external site.
http://avro.apache.org/docs/1.7.4/api/java/index.htmlLinks to an external site.
 

If you get an error message like this:

java.lang.Exception: java.lang.NoSuchMethodError: org.apache.avro.generic.GenericData.createDatumWriter(Lorg/apache/avro/Schema;)Lorg/apache/avro/io/DatumWriter;
this indicates a mismatch between the AVRO version you compiled against, and the AVRO version in your classpath (the version used at runtime).